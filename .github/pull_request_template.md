# 과제 체크포인트

## 과제 요구사항

- [ ] 배포 후 url 제출

- [ ] API 호출 최적화(`Promise.all` 이해)

- [ ] SearchDialog 불필요한 연산 최적화
- [ ] SearchDialog 불필요한 리렌더링 최적화

- [ ] 시간표 블록 드래그시 렌더링 최적화
- [ ] 시간표 블록 드롭시 렌더링 최적화

# 리액트 프로젝트 성능 개선

- url: https://hanghae99plus.web.app

## 과제 셀프회고

<!-- 과제에 대한 회고를 작성해주세요 -->

### 기술적 성장

<!-- 예시
- 새로 학습한 개념
- 기존 지식의 재발견/심화
- 구현 과정에서의 기술적 도전과 해결
-->

배포에 대한 부분을 잘 몰라서 이번엔 firebase로 배포를 진행하며 학습해보았다.

### 배포 파이프라인 개요

#### Firebase 프로젝트 생성

1. Firebase 콘솔에 접속하여 새로운 프로젝트를 생성한다.

2. "Hosting"을 활성화한다.

3. Firebase CLI를 로컬에 설치한다:

   `npm install -g firebase-tools`

4. Firebase CLI 로그인:

   `firebase login`

5. Firebase 프로젝트를 초기화:

   `firebase init`

   - Hosting을 선택

   - 프로젝트를 선택

   - 빌드 폴더를 build/로 설정

6. 로컬에서 빌드 후 Firebase에 수동 배포:

   `npm run build` <br/>
   `firebase deploy`

#### GitHub Actions를 활용한 자동 배포

Firebase에 수동 배포하는 과정 대신, git push 시 자동으로 배포되도록 GitHub Actions를 설정한다.

1. Firebase 서비스 계정 키 생성

   - Firebase 콘솔에서 프로젝트 설정 → 서비스 계정으로 이동

   - "새 비공개 키 생성"을 클릭하여 JSON 파일 다운로드

   - GitHub 레포지토리에서 Settings → Secrets and variables → Actions로 이동

   - FIREBASE_SERVICE_ACCOUNT 라는 이름으로 JSON 파일 내용을 추가

2. GitHub Actions 설정 (.github/workflows/firebase-deploy.yml)

```
# This file was auto-generated by the Firebase CLI
# https://github.com/firebase/firebase-tools

name: Deploy to Firebase Hosting on merge
on:
  push:
    branches:
      - main
jobs:
  build_and_deploy:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout Repository
        uses: actions/checkout@v4 # ✅ 깃허브 레포지토리 코드 가져오기

      - name: Setup Node.js
        uses: actions/setup-node@v4
        with:
          node-version: 20

      - name: Install pnpm
        run: npm install -g pnpm # 🔥 pnpm 설치

      - name: Install Dependencies
        run: pnpm install # 🔥 pnpm으로 패키지 설치

      - name: Build Project
        run: pnpm run build # ✅ 프로젝트 빌드 (Firebase Hosting에 배포될 폴더 생성)

      - uses: FirebaseExtended/action-hosting-deploy@v0
        with:
          repoToken: ${{ secrets.GITHUB_TOKEN }}
          firebaseServiceAccount: ${{ secrets.FIREBASE_SERVICE_ACCOUNT_HANGHAE99PLUS }}
          channelId: live
          projectId: hanghae99plus
```

#### 트러블 슈팅

1️. iam.gserviceaccount.com does not exist 오류

- 원인: Firebase 서비스 계정 키가 없거나 GitHub Secrets에 등록되지 않음.
- 해결: Firebase 콘솔에서 JSON 키 생성 후, GitHub Secrets에 추가 (FIREBASE_SERVICE_ACCOUNT)

2️. pnpm: command not found 오류

- 원인: GitHub Actions 환경에 pnpm이 설치되지 않음.
- 해결: npm i -g pnpm 추가로 pnpm 설치

### 코드 품질

<!-- 예시
- 특히 만족스러운 구현
- 리팩토링이 필요한 부분
- 코드 설계 관련 고민과 결정
-->

성능 개선에 관련해 처음 다뤄보는 거라 아직 개선하는 방안을 잘 몰라서 그런건지 코드 품질에 대해서는 잘 모르겠다. 하지만, 진행한 결과를 정리해보자면 아래와 같다.

1. API 호출 캐싱을 적용하여 동일한 데이터를 여러번 요청하는 문제를 해결했다.
2. useMemo를 사용하여 필터링 연산이 필요할 때만 실행되도록 최적화했다.

### 학습 효과 분석

<!-- 예시
- 가장 큰 배움이 있었던 부분
- 추가 학습이 필요한 영역
- 실무 적용 가능성
-->

useMemo, memo을 활용한 렌더링 최적화가 렌더링에서 필수적이라는 점을 체감했다. 실무에서 대량 데이터가 있는 컴포넌트 최적화에 활용 가능할 것 같다. 상태 관리까지 개선했으면 더 좋지 않았을까 싶다.

### 과제 피드백

<!-- 예시
- 과제에서 모호하거나 애매했던 부분
- 과제에서 좋았던 부분
-->

최적화 포인트가 명확하게 주어져서 집중적으로 볼 수 있는 부분이 좋았다. 실무에서 겪을 법한 불필요한 API 호출, 리렌더링 문제를 직접 해결해볼 수 있었다. 개선 전후를 비교할 수 있어 좋았지만 비교하는 연습과 확인하는 학습이 필요할 듯 하다..

## 리뷰 받고 싶은 내용

<!--
피드백 받고 싶은 내용을 구체적으로 남겨주세요
모호한 요청은 피드백을 남기기 어렵습니다.

참고링크: https://chatgpt.com/share/675b6129-515c-8001-ba72-39d0fa4c7b62

모호한 요청의 예시)
- 코드 스타일에 대한 피드백 부탁드립니다.
- 코드 구조에 대한 피드백 부탁드립니다.
- 개념적인 오류에 대한 피드백 부탁드립니다.
- 추가 구현이 필요한 부분에 대한 피드백 부탁드립니다.

구체적인 요청의 예시)
- 현재 함수와 변수명을 보면 직관성이 떨어지는 것 같습니다. 함수와 변수를 더 명확하게 이름 지을 수 있는 방법에 대해 조언해주실 수 있나요?
- 현재 파일 단위로 코드가 분리되어 있지만, 모듈화나 계층화가 부족한 것 같습니다. 어떤 기준으로 클래스를 분리하거나 모듈화를 진행하면 유지보수에 도움이 될까요?
- MVC 패턴을 따르려고 했는데, 제가 구현한 구조가 MVC 원칙에 맞게 잘 구성되었는지 검토해주시고, 보완할 부분을 제안해주실 수 있을까요?
- 컴포넌트 간의 의존성이 높아져서 테스트하기 어려운 상황입니다. 의존성을 낮추고 테스트 가능성을 높이는 구조 개선 방안이 있을까요?
-->
